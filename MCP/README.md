# MCP (Model Context Protocol)

**Purpose**: Storage for MCP tool registry snapshots and server configuration notes.

## Directory Structure

MCP files organized by server:
```
Logs/mcp_tools_snapshot_<server>.json   # Tool snapshots (gitignored)
<server>_notes.md                        # Server-specific configuration notes (optional)
```

Examples:
- `Logs/mcp_tools_snapshot_whatsapp.json` — WhatsApp MCP server tool list
- `Logs/mcp_tools_snapshot_linkedin.json` — LinkedIn MCP server tool list
- `Logs/mcp_tools_snapshot_twitter.json` — Twitter MCP server tool list
- `Logs/mcp_tools_snapshot_odoo.json` — Odoo MCP server tool list
- `whatsapp_notes.md` — WhatsApp server configuration notes

## Tool Snapshot Format

Tool snapshots are JSON files containing:

```json
{
  "server_name": "whatsapp",
  "snapshot_timestamp": "2026-02-15T14:30:00Z",
  "version": "1.0",
  "tools": [
    {
      "name": "whatsapp.send_message",
      "description": "Send a WhatsApp message",
      "parameters": {
        "to": {"type": "string", "required": true},
        "message": {"type": "string", "required": true}
      },
      "returns": "message_id"
    }
  ]
}
```

## Generation

Tool snapshots are generated by `brain_mcp_registry_refresh` skill:
- **Schedule**: Daily at 2:00 AM UTC
- **Purpose**: Track available MCP tools, detect changes in server capabilities
- **Output**: `Logs/mcp_tools_snapshot_<server>.json` for each configured server

## MCP Servers (Gold Tier)

### 1. **mcp-whatsapp**
- **Tools**: send_message, reply_message, list_messages, get_message, broadcast_message (optional)
- **Setup**: See `Docs/mcp_whatsapp_setup.md` (G-M4)

### 2. **mcp-linkedin**
- **Tools**: create_post, reply_comment, send_message, list_notifications, get_post_analytics
- **Setup**: See `Docs/mcp_linkedin_setup.md` (G-M4)

### 3. **mcp-twitter**
- **Tools**: create_post, reply_post, send_dm, search_mentions, get_post_metrics
- **Setup**: See `Docs/mcp_twitter_setup.md` (G-M4)

### 4. **mcp-odoo**
- **Tools**: Query tools (list_unpaid_invoices, revenue_summary, ar_aging_summary, get_invoice, get_customer) + Action tools (create_invoice, post_invoice, register_payment, create_credit_note)
- **Setup**: See `Docs/mcp_odoo_setup.md` (G-M5)

## Graceful Degradation

If an MCP server is unreachable:
1. `brain_mcp_registry_refresh` logs error
2. `brain_handle_mcp_failure` creates remediation task in `Needs_Action/`
3. System continues with other servers (graceful degradation)

## Dashboard Integration

MCP Registry Status shown in `Dashboard.md`:
- Server name
- Status (Reachable / Unreachable)
- Last refresh timestamp
- Tool count

## See Also

- `Docs/mcp_tools_snapshot_example.json` — Example snapshot format (G-M2)
- `specs/001-gold-tier-full/contracts/` — MCP tool contracts (G-M4, G-M5)
- `Logs/mcp_failures.log` — MCP failure log
- `Dashboard.md` — MCP Registry Status section
